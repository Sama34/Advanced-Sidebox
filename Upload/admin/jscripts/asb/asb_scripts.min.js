/*
 * Plugin Name: Advanced Sidebox for MyBB 1.8.x
 * Copyright 2014 WildcardSearch
 * http://www.rantcentralforums.com
 *
 * this file contains JavaScript for the ACP script edit functions
 */

var ASB=(function(f,i){
"use strict";
var g="",b={nothing_found:"nothing found",hooks:"hooks",actions:"actions",templates:"templates",error_file_name_empty:"no file name",error_file_does_not_exist:"file does not exist",error_file_empty:"file empty or corrupted"};function j(){new Peeker(f(".replace_all"),f("#replace_content"),/1/,true);new Peeker(f(".replace_all"),f("#header_search"),/0/,true);new Peeker(f(".replace_all"),f("#footer_search"),/0/,true);new Peeker(f(".eval"),f("#template_row"),/0/,true);new Peeker(f(".eval"),f("#header_search"),/0/,true);new Peeker(f(".eval"),f("#footer_search"),/0/,true);new Peeker(f(".eval"),f("#replace_all"),/0/,true);new Peeker(f(".eval"),f("#replace_content"),/0/,true);if(f("#replace_all_yes").prop("checked")){f("#header_search").hide();f("#footer_search").hide()}else{f("#replace_content").hide()}if(f("#eval_yes").prop("checked")){f("#header_search").hide();f("#footer_search").hide();f("#template_row").hide();f("#replace_all").hide();f("#replace_content").hide()}h();f("#filename").on("blur",e)}function e(a){if(this.value==g||this.value==""){return}g=this.value;f("#hook_list").hide();f("#template_list").hide();f("#action_list").hide();f("div.ajax_spinners").show();f.ajax({type:"post",url:"index.php",data:{module:"config-asb",action:"xmlhttp",mode:"analyze_script",filename:this.value,selected:{hook:f("#hook").val(),template:f("#template_name").val(),action:f("#action").val()}},success:d,error:function(k,m,l){alert("error\n\n"+m+"\n\n"+l)}})}function d(l){var a=f("#file_info"),k;f("div.ajax_spinners").hide();if(typeof l.error!=="undefined"){switch(l.error){case 1:k=b.error_file_name_empty;break;case 3:k=b.error_file_empty;break;default:k=b.error_file_does_not_exist;break}a.html(k);return}else{a.html("")}f.each(["hook","template","action"],function(o,m){var p=m+"s",n='<span style="font-style: italic;">'+b.nothing_found.replace("{1}",b[p])+"</span>";if(l[p]){n=l[p]}f("#"+m+"_list").html(n).show()});h()}function h(){if(f("#hook_selector")){f("#hook_selector").on("change",function(a){var k=this.value;if(k==0){k=""}f("#hook").val(k)})}if(f("#template_selector")){f("#template_selector").on("change",function(a){var k=this.value;if(k==0){k=""}f("#template_name").val(k)})}if(f("#action_selector")){f("#action_selector").on("change",function(a){var k=this.value;if(k==0){k=""}f("#action").val(k)})}}function c(k,a){g=k||"";f.extend(b,a||{})}f(j);i.scripts={setup:c};return i})(jQuery,ASB||{});